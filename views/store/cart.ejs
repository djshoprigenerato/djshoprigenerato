<h1>Carrello</h1>
<% if (!items.length) { %>
  <p>Il carrello e vuoto. <a href="/">Continua lo shopping</a></p>
<% } else { %>
  <table>
    <thead><tr><th>Prodotto</th><th>Prezzo</th><th>Quantita</th><th>Subtotale</th></tr></thead>
    <tbody>
      <% items.forEach(i => { %>
        <tr>
          <td><a href="/product/<%= i.slug %>"><%= i.title %></a></td>
          <td>€ <%= (i.price_cents/100).toFixed(2) %></td>
          <td>
            <form method="post" action="/cart/update" style="display:flex;gap:8px;align-items:center;">
              <input type="hidden" name="product_id" value="<%= i.product_id %>"/>
              <input style="width:80px" type="number" min="0" name="quantity" value="<%= i.quantity %>"/>
              <button class="btn secondary" type="submit">Aggiorna</button>
            </form>
          </td>
          <td>€ <%= ((i.price_cents*i.quantity)/100).toFixed(2) %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <p style="text-align:right; font-size:18px; font-weight:700; margin-top:12px;">Totale: € <%= (total/100).toFixed(2) %> — <span class="ship-badge">Spedizione gratuita</span></p>
  <a class="btn" href="/checkout">Vai al checkout</a>
<% } %>
