<h1 class="page-title">Prodotti</h1>

<form method="get" style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
  <input type="text" name="q" value="<%= q||'' %>" placeholder="Cerca titolo/descrizione…" style="padding:8px;border:1px solid #1f2937;border-radius:8px;width:280px">
  <select name="category" style="padding:8px;border:1px solid #1f2937;border-radius:8px">
    <option value="">Tutte le categorie</option>
    <% (cats||[]).forEach(function(c){ %>
      <option value="<%= c.slug %>" <%= (category===c.slug?'selected':'') %>><%= c.name %></option>
    <% }) %>
  </select>
  <button class="btn">Filtra</button>
</form>

<table class="table">
  <thead>
    <tr>
      <th>ID</th><th>Titolo</th><th>Categoria</th><th>€</th><th>Pubblicato</th><th>Creato</th>
    </tr>
  </thead>
  <tbody>
    <% (products||[]).forEach(function(p){ %>
      <tr>
        <td><%= p.id %></td>
        <td><a href="/product/<%= p.slug %>" target="_blank"><%= p.title %></a></td>
        <td><%= p.category_name || '-' %></td>
        <td><%= (p.price_cents/100).toFixed(2) %></td>
        <td><%= p.is_active ? 'Sì' : 'No' %></td>
        <td><%= new Date(p.created_at).toLocaleString() %></td>
      </tr>
    <% }) %>
    <% if(!(products||[]).length){ %>
      <tr><td colspan="6">Nessun prodotto trovato.</td></tr>
    <% } %>
  </tbody>
</table>
